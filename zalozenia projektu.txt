
Architektura i Implementacja Adaptacyjnego Systemu Transakcyjnego opartego o Reżimy Rynkowe


Sekcja 1: Ramy Architektoniczne dla Adaptacyjnego Systemu Transakcyjnego

Fundamentem skutecznego bota transakcyjnego jest jego architektura – nadrzędna logika, która dyktuje jego zachowanie w dynamicznie zmieniających się warunkach rynkowych. Proponowany system wykracza poza prosty, binarny model przełączania strategii, implementując wielostanowy model operacyjny. Model ten opiera się na jednoczesnej analizie siły trendu, mierzonej za pomocą wskaźnika Average Directional Index (ADX), oraz zmienności rynkowej, kwantyfikowanej przez Average True Range (ATR). Taka dwuwymiarowa ocena rynku pozwala na precyzyjne dopasowanie strategii, a także na identyfikację warunków, w których handel jest niepożądany lub obarczony nadmiernym ryzykiem.

1.1 Wskaźnik ADX jako Podstawowy Mechanizm Przełączania Reżimów

Wskaźnik Average Directional Index (ADX) stanowi rdzeń mechanizmu decyzyjnego systemu, odpowiadając za klasyfikację charakteru rynku jako będącego w trendzie lub w konsolidacji. Kluczową cechą ADX jest to, że mierzy on wyłącznie siłę trendu, a nie jego kierunek, co czyni go idealnym, obiektywnym narzędziem do identyfikacji reżimu rynkowego.1 System będzie operował w oparciu o precyzyjnie zdefiniowane progi wartości ADX.
Reżim Konsolidacji (Aktywny Moduł Mean-Reversion): Ten reżim jest identyfikowany, gdy wartość wskaźnika ADX (obliczanego dla standardowego okresu 14 świec) spada poniżej poziomu 25. Taki odczyt wskazuje na brak wyraźnego, dominującego trendu lub na jego znaczące osłabienie.1 W tych warunkach rynkowych ceny mają tendencję do oscylowania w ograniczonym zakresie, poruszając się pomiędzy poziomami wsparcia i oporu. Taka charakterystyka rynku stwarza optymalne środowisko dla strategii typu
mean-reversion (powrotu do średniej), które dążą do czerpania zysków z tych właśnie wahań.4 W konsekwencji, po zdiagnozowaniu reżimu konsolidacji, system automatycznie aktywuje moduł transakcyjny oparty na oscylatorze stochastycznym.
Reżim Trendowy (Aktywny Moduł Podążania za Trendem): Reżim ten jest potwierdzony, gdy wartość wskaźnika ADX wzrasta powyżej poziomu 25. Taki odczyt jest jednoznacznym sygnałem, że na rynku ukształtował się silny, kierunkowy ruch, co czyni strategie podążania za trendem (np. oparte na przecięciach średnich kroczących lub sygnałach z systemu DMI) znacznie bardziej skutecznymi.1 W odpowiedzi na ten sygnał, system aktywuje moduł transakcyjny oparty na analizie kierunkowej (Directional Movement). Wartości ADX przekraczające 50 wskazują na bardzo silny trend, jednak wymagają zwiększonej ostrożności, gdyż mogą sygnalizować przegrzanie rynku i zbliżającą się korektę.1
Strefa Przejściowa/Niejednoznaczna: Zakres wartości ADX pomiędzy 20 a 25 jest traktowany jako krytyczna "szara strefa".1 W tym przedziale rynek nie jest ani w pełni w konsolidacji, ani w jednoznacznym trendzie. System nie będzie w tym czasie podejmował pochopnych decyzji o otwarciu nowych pozycji. Zamiast tego, zastosuje bardziej rygorystyczne kryteria potwierdzenia sygnału, takie jak wymóg silniejszego impulsu cenowego, znaczącego wzrostu wolumenu lub potwierdzenia z dodatkowego wskaźnika. Istotne jest, że wejście w tę strefę nie powoduje automatycznego zamknięcia już otwartych pozycji; pozostają one aktywne i zarządzane są zgodnie z logiką wyjścia strategii, w ramach której zostały otwarte.
Zaawansowana interpretacja wskaźnika ADX nie ogranicza się jedynie do jego wartości bezwzględnej. Nachylenie (slope) linii ADX dostarcza cennych informacji prognostycznych. Gwałtowny wzrost wartości ADX, nawet z bardzo niskich poziomów (np. z 15 do 22), często poprzedza dynamiczne wybicie z fazy konsolidacji.1 Z kolei malejące nachylenie ADX, nawet przy jego wysokich wartościach (np. spadek z 50 do 40), może sygnalizować wyczerpywanie się siły trendu i zbliżającą się fazę dystrybucji lub konsolidacji.1 Ta obserwacja pozwala przekształcić ADX z wskaźnika opóźnionego, potwierdzającego aktualny stan rynku, w wskaźnik wiodący, który sygnalizuje
zmianę stanu. Dlatego logika systemu nie będzie oparta na prostym warunku if ADX > 25. Zamiast tego, bot będzie monitorował stopę zmian wartości ADX. Będąc w reżimie konsolidacji, gwałtownie rosnące nachylenie ADX posłuży jako sygnał ostrzegawczy, przygotowując system do aktywacji modułu trendowego i poszukiwania okazji do wejścia na wybiciu, potencjalnie jeszcze zanim ADX przekroczy próg 25.

1.2 Filtr Zmienności Oparty na ATR: Główny Wyłącznik Systemu

Aby zabezpieczyć system przed handlem w warunkach skrajnie niekorzystnych, zaimplementowany zostanie nadrzędny filtr zmienności, działający jako główny włącznik/wyłącznik (master on/off switch). Jego zadaniem jest dezaktywacja otwierania nowych pozycji w okresach ekstremalnie niskiej lub ekstremalnie wysokiej zmienności. Narzędziem do budowy tego filtra jest wskaźnik Average True Range (ATR), który jest standardową miarą zmienności cenowej, niezależną od kierunku ruchu ceny.6
Konstrukcja filtra opiera się na podejściu ilościowym, które analizuje samą dynamikę zmienności, a nie tylko jej bezwzględny poziom. W tym celu bieżąca wartość ATR (obliczona dla 14 okresów) będzie porównywana z jej własną, długoterminową prostą średnią kroczącą (SMA), na przykład 100-okresową. Taki mechanizm tworzy dynamiczny, samoadaptujący się próg, który dostosowuje się do charakterystyki danego instrumentu i jego zmienności w długim terminie.8
Stan Rynku "Stagnacyjnego" (Handel Wyłączony):
Warunek: $ATR(14) < 0.5 \times SMA(ATR(14), 100)$
Uzasadnienie: Gdy zmienność spada do ekstremalnie niskich poziomów, ruchy cenowe stają się zbyt małe, aby którakolwiek ze strategii mogła wygenerować zysk przewyższający koszty transakcyjne (prowizje i spread). Handel w takich warunkach prowadzi do powolnej erozji kapitału. W tym stanie bot nie będzie otwierał żadnych nowych pozycji, ale będzie nadal zarządzał już otwartymi pozycjami zgodnie z ich logiką wyjścia.
Stan Rynku "Panic" (Handel Wyłączony):
Warunek: $ATR(14) > 3.0 \times SMA(ATR(14), 100)$
Uzasadnienie: Gwałtowny, ekstremalny wzrost zmienności często towarzyszy nieprzewidywalnym wydarzeniom rynkowym, takim jak publikacje kluczowych danych makroekonomicznych, kryzysy geopolityczne czy tzw. "flash crashe". W takich warunkach standardowe modele ryzyka zawodzą, zlecenia stop-loss są narażone na częste i gwałtowne wybicia, a poślizgi cenowe (slippage) mogą znacząco pogorszyć wyniki. Aby chronić kapitał przed chaotycznymi ruchami, bot wstrzyma otwieranie nowych pozycji. Dodatkowo, dla już otwartych pozycji, może zastosować bardziej agresywne (ciaśniejsze) zlecenia trailing stop, aby szybciej zabezpieczyć zyski.

1.3 Integracja Wskaźników Kierunkowych (+DI / -DI)

Podczas gdy ADX dostarcza kluczowej informacji o sile trendu, nie wskazuje on jego kierunku. Tę funkcję pełnią dwa komponenty, z których ADX jest pochodną: Plus Directional Indicator (+DI) oraz Minus Directional Indicator (-DI).2
Relacja pomiędzy liniami +DI i -DI będzie stanowiła podstawowy generator sygnałów dla modułu podążania za trendem. Logika jest prosta i jednoznaczna:
Trend wzrostowy jest potwierdzony, gdy linia +DI znajduje się powyżej linii -DI.1 Oznacza to, że presja kupujących w danym okresie przeważa nad presją sprzedających.
Trend spadkowy jest potwierdzony, gdy linia -DI znajduje się powyżej linii +DI.1 Wskazuje to na dominację sił podażowych na rynku.
Przecięcie się tych dwóch linii, w połączeniu z odpowiednio wysokim i rosnącym poziomem ADX, będzie stanowiło główny sygnał do zajęcia pozycji zgodnej z nowo zidentyfikowanym kierunkiem trendu.
Poniższa tabela syntetyzuje logikę klasyfikacji reżimów rynkowych, tworząc kompletną macierz decyzyjną dla systemu. Jest to fundament, na którym opiera się cała adaptacyjna funkcjonalność bota, łącząc analizę siły trendu z filtrem zmienności w cztery jednoznaczne stany operacyjne.
Tabela 1: Macierz Klasyfikacji Reżimów Rynkowych
Nazwa Reżimu
Warunek ADX(14)
Warunek Zmienności (ATR vs SMA)
Aktywny Moduł Strategii
Dozwolone Działania
Trendowy
$ADX > 25$
$0.5 < \frac{ATR}{SMA} < 3.0$
Podążania za Trendem
Otwieranie, zarządzanie i zamykanie pozycji
Konsolidacji
$ADX < 25$
$0.5 < \frac{ATR}{SMA} < 3.0$
Mean-Reversion (Oscylator Stoch.)
Otwieranie, zarządzanie i zamykanie pozycji
Stagnacyjny
Dowolny
$\frac{ATR}{SMA} < 0.5$
Brak
Zakaz otwierania nowych pozycji; zarządzanie istniejącymi
Paniki
Dowolny
$\frac{ATR}{SMA} > 3.0$
Brak
Zakaz otwierania nowych pozycji; zacieśnianie stop-loss


Sekcja 2: Moduł Rynku w Konsolidacji: Strategia Mean-Reversion z Oscylatorem Stochastycznym

Gdy system zdiagnozuje reżim konsolidacji (ADX < 25), aktywuje moduł transakcyjny zaprojektowany do czerpania zysków z ruchów oscylacyjnych ceny. Podstawowym narzędziem w tym module jest oscylator stochastyczny, wskaźnik momentum, który porównuje cenę zamknięcia instrumentu do jego zakresu wahań w danym okresie.10 Jego głównym zadaniem jest identyfikacja potencjalnych punktów zwrotnych w pobliżu lokalnych ekstremów cenowych, czyli poziomów wsparcia i oporu.

2.1 Parametryzacja dla Rynków w Konsolidacji

Skuteczność oscylatora stochastycznego jest silnie uzależniona od jego parametrów, które powinny być dostosowane do charakteru rynku. W warunkach konsolidacji, gdzie ruchy cenowe są zazwyczaj krótsze i szybsze, preferowane są ustawienia o większej czułości.
Ustawienia Oscylatora: System będzie domyślnie używał szybszych ustawień (5, 3, 3) dla oscylatora stochastycznego.11 Oznacza to 5-okresową kalkulację dla linii %K, 3-okresowe wygładzenie linii %K (tworzące linię Slow %K) oraz 3-okresową średnią kroczącą z linii Slow %K (tworzącą linię %D). Takie ustawienia sprawiają, że wskaźnik jest bardziej responsywny na krótkoterminowe zmiany cen, co jest kluczowe dla wychwytywania punktów zwrotnych wewnątrz zakresu wahań.
Progi Wykupienia/Wyprzedania: Standardowe poziomy 80 jako próg wykupienia (overbought) i 20 jako próg wyprzedania (oversold) będą stosowane do identyfikacji stref, w których prawdopodobieństwo odwrócenia ruchu ceny jest podwyższone.10 Odczyt powyżej 80 sugeruje, że cena zamknięcia znajduje się blisko maksimum z analizowanego okresu, a odczyt poniżej 20 – blisko minimum.
Jednakże, system może wykazać się jeszcze wyższym stopniem adaptacji poprzez dynamiczne dostosowywanie parametrów oscylatora do charakteru samej konsolidacji. Szerokość i zmienność zakresu wahań nie są stałe. W okresach bardzo niskiej zmienności, gdy rynek porusza się w wąskim kanale, standardowe ustawienia mogą być zbyt wolne. W takich warunkach, gdy system jest w reżimie konsolidacji (ADX < 25), a jednocześnie filtr zmienności wskazuje na niską zmienność (np. $ATR < 0.75 \times SMA(ATR, 100)$), bot może automatycznie przełączyć się na jeszcze bardziej czułe ustawienia, np. (5, 3, 3) z progami 70/30.11 Z drugiej strony, w szerszym i bardziej "szumnym" zakresie wahań (np.
$ATR > 1.25 \times SMA(ATR, 100)$), system może zastosować nieco wolniejsze ustawienia (np. 9, 3, 3) z progami 80/20, aby odfiltrować mniej znaczące wahania. Taka logika tworzy system, który adaptuje się nie tylko do ogólnego reżimu, ale również do jego specyficznej charakterystyki.

2.2 Logika Wejścia i Wyjścia

Podstawowym sygnałem transakcyjnym generowanym przez ten moduł jest przecięcie się linii %K i %D wewnątrz zdefiniowanych stref wykupienia lub wyprzedania.12
Sygnał Wejścia na Pozycję Długą (Kupno):
Warunek reżimu: ADX(14) < 25.
Warunek wyprzedania: Obie linie oscylatora, %K i %D, znajdują się poniżej poziomu 20.
Sygnał przecięcia: Linia %K przecina od dołu linię %D.11 Ten sygnał wskazuje na rosnące momentum i potencjalne odbicie ceny od dolnego ograniczenia zakresu.
Sygnał Wejścia na Pozycję Krótką (Sprzedaż):
Warunek reżimu: ADX(14) < 25.
Warunek wykupienia: Obie linie oscylatora, %K i %D, znajdują się powyżej poziomu 80.
Sygnał przecięcia: Linia %K przecina od góry linię %D.11 Sygnalizuje to słabnące momentum i potencjalne odbicie od górnego ograniczenia zakresu.
Cel Zysku (Take Profit): W strategii mean-reversion kluczowe jest realizowanie zysków na z góry określonych poziomach. Podstawowym celem zysku będzie przeciwległe ograniczenie zidentyfikowanego zakresu wahań. Dla pozycji długiej, celem będzie najbliższy istotny poziom oporu. Dla pozycji krótkiej, celem będzie najbliższy istotny poziom wsparcia.
Zlecenie Stop-Loss: Początkowe zlecenie zabezpieczające przed stratą zostanie umieszczone tuż za zidentyfikowanym poziomem wsparcia (dla pozycji długich) lub oporu (dla pozycji krótkich). Precyzyjna odległość zlecenia stop-loss będzie dynamicznie kalkulowana na podstawie wskaźnika ATR, co zostanie szczegółowo opisane w Sekcji 4.

2.3 Potwierdzenie za pomocą Wsparcia, Oporu i Wolumenu

Sygnały generowane przez oscylator stochastyczny, traktowane w izolacji, mogą być zawodne. Ich wiarygodność drastycznie wzrasta, gdy są one potwierdzone przez inne elementy analizy technicznej, przede wszystkim przez kluczowe poziomy cenowe.11
Logika systemu będzie wymagała, aby sygnał transakcyjny (przecięcie %K/%D) wystąpił, gdy cena znajduje się w bezpośredniej bliskości (np. w odległości nie większej niż 0.25×ATR) horyzontalnego poziomu wsparcia (dla sygnału kupna) lub oporu (dla sygnału sprzedaży). Poziomy te mogą być identyfikowane automatycznie na podstawie poprzednich szczytów i dołków cenowych.
Dodatkowym, silnym czynnikiem potwierdzającym może być analiza wolumenu obrotów. Nagły wzrost wolumenu w momencie testowania poziomu wsparcia lub oporu, zbiegający się w czasie z sygnałem z oscylatora, może wskazywać na kulminację (kapitulację) jednej ze stron rynku i zwiększać prawdopodobieństwo skutecznego odwrócenia ceny.

Sekcja 3: Moduł Rynku w Trendzie: Strategia Oparta na Ruchu Kierunkowym

Gdy system identyfikuje silny trend (ADX > 25), jego priorytetem staje się zajmowanie pozycji zgodnych z dominującym kierunkiem rynku i maksymalizacja zysków poprzez "podążanie za trendem". Moduł ten wykorzystuje system Directional Movement (DMI), składający się ze wskaźników +DI, -DI oraz ADX, do generowania precyzyjnych sygnałów wejścia i dynamicznego zarządzania otwartą pozycją.

3.1 Generowanie Sygnału Pierwotnego: Przecięcie Linii +DI / -DI

Aktywacja tego modułu następuje, gdy wartość wskaźnika ADX(14) przekroczy próg 25, co jest potwierdzeniem istnienia silnego trendu.1 Głównym sygnałem inicjującym transakcję jest przecięcie się linii kierunkowych +DI i -DI.
Sygnał Wejścia na Pozycję Długą (Kupno):
Warunek reżimu: ADX(14) znajduje się powyżej 25 i, co istotne, jego wartość rośnie, co wskazuje na narastającą siłę trendu.
Sygnał przecięcia: Linia +DI przecina od dołu linię -DI.3 To zdarzenie sygnalizuje, że siła ruchu wzrostowego zaczyna dominować nad siłą ruchu spadkowego, co jest klasycznym sygnałem do zajęcia pozycji długiej.
Sygnał Wejścia na Pozycję Krótką (Sprzedaż):
Warunek reżimu: ADX(14) znajduje się powyżej 25 i jego wartość rośnie.
Sygnał przecięcia: Linia -DI przecina od dołu linię +DI.3 Wskazuje to na przejęcie kontroli przez stronę podażową i jest sygnałem do zajęcia pozycji krótkiej.
Aby uniknąć fałszywych sygnałów, które mogą pojawić się w trakcie formowania się świecy, zlecenie wejścia będzie składane na otwarciu świecy następującej po świecy, na której nastąpiło potwierdzone przecięcie linii +DI/-DI.

3.2 Zarządzanie Pozycją w Środowisku Trendowym

Zarządzanie pozycją w trendzie różni się fundamentalnie od zarządzania pozycją w konsolidacji. Celem nie jest szybka realizacja małego zysku, lecz pozwolenie zyskom rosnąć tak długo, jak długo utrzymuje się trend.
Początkowy Stop-Loss: Bezpośrednio po otwarciu pozycji, ustawiane jest zlecenie stop-loss. Jego odległość od ceny wejścia jest dynamicznie obliczana jako wielokrotność wskaźnika ATR, np. 2×ATR(14).6 Taki mechanizm zapewnia, że zlecenie jest wystarczająco "szerokie", aby przetrwać naturalne korekty w ramach trendu, a jego odległość jest automatycznie dostosowywana do bieżącej zmienności rynku.
Realizacja Zysków: Kroczący Stop-Loss (Trailing Stop) oparty na ATR: Zamiast stałego celu zysku, moduł trendowy wykorzystuje dynamiczny, kroczący stop-loss, który podąża za ceną, zabezpieczając coraz większą część zysku. Jedną z najbardziej cenionych metod jest "Chandelier Exit".7
Dla pozycji długiej, poziom zlecenia stop-loss jest ustawiany na: (Najwyższa cena od momentu wejścia) - N \times ATR(14).
Dla pozycji krótkiej, poziom zlecenia jest ustawiany na: (Najniższa cena od momentu wejścia) + N \times ATR(14).
Wartość mnożnika N (zazwyczaj w przedziale od 2.5 do 3.5) jest kluczowym parametrem, który będzie podlegał optymalizacji w procesie backtestingu. Ten mechanizm pozwala pozycji "oddychać" podczas korekt, jednocześnie zamykając ją, gdy ruch w przeciwnym kierunku jest większy niż typowa zmienność, co może sygnalizować koniec trendu.

3.3 Filtrowanie i Potwierdzanie Sygnałów

W celu zwiększenia jakości i prawdopodobieństwa sukcesu transakcji, sygnały wejścia będą podlegały dodatkowym filtrom.
Filtr Nachylenia ADX: Sygnał wejścia będzie brany pod uwagę tylko wtedy, gdy wskaźnik ADX nie tylko znajduje się powyżej 25, ale również wykazywał dodatnie nachylenie (wzrastał) w ciągu ostatnich 3-5 okresów. Ten filtr ma na celu eliminację sygnałów pojawiających się w momencie, gdy trend osiągnął już swoje apogeum i zaczyna tracić impet.1
Filtr Średniej Kroczącej: Dodatkowym potwierdzeniem może być relacja ceny do długoterminowej średniej kroczącej, np. 50-okresowej EMA. System może być skonfigurowany tak, aby przyjmować tylko sygnały kupna, gdy cena znajduje się powyżej 50 EMA, i tylko sygnały sprzedaży, gdy cena jest poniżej tej średniej.3 Działa to jako prosty, ale skuteczny filtr ogólnego sentymentu rynkowego.
Poniższa tabela w sposób zwięzły przedstawia fundamentalne różnice w działaniu obu modułów strategicznych, co jest kluczowe dla zrozumienia adaptacyjnej natury systemu.
Tabela 2: Tabela Porównawcza Parametrów Strategii
Parametr
Moduł Konsolidacji (ADX < 25)
Moduł Trendowy (ADX > 25)
Podstawowy Wskaźnik
Oscylator Stochastyczny (5, 3, 3)
System DMI (ADX, +DI, -DI) (14)
Logika Wejścia
Przecięcie w strefie wyprzedania/wykupienia blisko W/O
Przecięcie +DI/-DI przy ADX > 25
Cel Zysku
Stały, blisko przeciwległego ograniczenia zakresu
Otwarty (realizowany przez Trailing Stop)
Metoda Stop-Loss
Początkowy, statyczny stop oparty na ATR
Kroczący stop oparty na ATR (Chandelier Exit)
Założenie Rynkowe
Powrót do średniej (Mean Reversion)
Kontynuacja ruchu (Momentum)
Priorytet
Wysoka trafność (Win Rate)
Wysoki stosunek zysku do ryzyka (Reward/Risk)


Sekcja 4: Wielowarstwowy Protokół Zarządzania Ryzykiem i Ponownym Wejściem

Efektywne zarządzanie ryzykiem jest kręgosłupem każdego profesjonalnego systemu transakcyjnego. Proponowany bot implementuje wielowarstwowy protokół, który wykracza poza proste zlecenia stop-loss, tworząc dynamiczny i inteligentny system ochrony kapitału oraz odzyskiwania utraconych okazji. Protokół ten składa się z dwóch kluczowych komponentów: adaptacyjnego zarządzania wielkością pozycji i stop-loss oraz zdefiniowanego algorytmu ponownego wejścia w pozycję.

4.1 Adaptacyjne Parametry Transakcji w Zależności od Zmienności

Fundamentalną zasadą tego protokołu jest utrzymanie stałego ryzyka (wyrażonego jako procent kapitału, np. 1%) na każdą pojedynczą transakcję, niezależnie od panujących warunków rynkowych. Kluczem do osiągnięcia tego celu jest wykorzystanie wskaźnika ATR jako dynamicznej miary ryzyka.
Dynamiczna Odległość Zlecenia Stop-Loss: Zlecenie stop-loss nie będzie ustawiane na podstawie stałej liczby punktów czy procentowej straty. Jego odległość od ceny wejścia będzie dynamicznie kalkulowana jako wielokrotność aktualnej wartości ATR. Standardowym punktem wyjścia jest mnożnik 2, czyli odległość stop-loss wynosi 2×ATR(14).6 W okresach wysokiej zmienności, gdy ATR rośnie, odległość stop-loss w ujęciu absolutnym (np. w dolarach) automatycznie się zwiększa, dając pozycji więcej przestrzeni na "oddychanie". W okresach niskiej zmienności, stop-loss staje się ciaśniejszy.
Dynamiczne Dobieranie Wielkości Pozycji: Aby utrzymać stałe ryzyko procentowe, wielkość pozycji musi być odwrotnie proporcjonalna do odległości zlecenia stop-loss. Na podstawie zdefiniowanego ryzyka na transakcję, system będzie obliczał wielkość pozycji dla każdego nowego zlecenia według wzoru:
$$ \text{Wielkość Pozycji} = \frac{\text{Kapitał} \times \text{Ryzyko %}}{\text{Odległość Stop-Loss w $}} $$
.14
Te dwa mechanizmy tworzą samoregulujące się sprzężenie zwrotne. Wzrost zmienności (wzrost ATR) prowadzi do poszerzenia zlecenia stop-loss. Szerszy stop-loss, przy stałym ryzyku procentowym, wymusza z kolei zmniejszenie wielkości pozycji. W rezultacie system automatycznie redukuje swoją ekspozycję na ryzyko dokładnie wtedy, gdy rynek staje się bardziej nieprzewidywalny i niebezpieczny. Jest to kluczowa cecha odróżniająca systemy profesjonalne od amatorskich.14

4.2 Inteligentny Mechanizm Ponownego Wejścia

Jednym z najczęstszych problemów w tradingu jest przedwczesne zamknięcie pozycji przez zlecenie stop-loss, po którym cena natychmiast zawraca i podąża w pierwotnie przewidywanym kierunku. Mechanizm ponownego wejścia ma na celu odróżnienie takiego przypadku ("whipsaw", czyli przypadkowego szumu rynkowego) od fundamentalnego błędu w analizie i pozwolenie na ponowne otwarcie pozycji tylko w tej pierwszej sytuacji.16
Algorytm Ponownego Wejścia: Ponowne wejście w pozycję jest dozwolone tylko i wyłącznie wtedy, gdy wszystkie poniższe warunki zostaną spełnione w ścisłej kolejności:
Potwierdzenie Zamknięcia na Stop-Loss: Pozycja została zamknięta przez zlecenie stop-loss w ciągu ostatnich N świec (np. N=3).
Weryfikacja Ważności Tezy: Pierwotny reżim rynkowy (Konsolidacji lub Trendowy), zdefiniowany przez ADX, nie uległ zmianie. Jeśli reżim się zmienił (np. z konsolidacji w trend), pierwotne założenie transakcji jest już nieaktualne i ponowne wejście jest zabronione.
Filtr "Szum" vs. "Błąd": Zamknięcie na stop-loss musi zostać zaklasyfikowane jako prawdopodobny efekt szumu rynkowego. Prosta, ale skuteczna reguła: ruch cenowy, który aktywował stop-loss, nie przekroczył "progu błędu", np. 1.5× pierwotna odległość stop-loss. Jeśli cena z dużą siłą przebija poziom stop-loss, oznacza to, że pierwotna analiza była błędna, a nie że rynek był jedynie "szumny".
Pojawienie się Nowego Sygnału Potwierdzającego: Pierwotny sygnał wejścia (np. nowe przecięcie na oscylatorze stochastycznym lub nowe przecięcie linii +DI/-DI) musi pojawić się ponownie. Bot nie wejdzie ponownie w pozycję na podstawie starego, już zanegowanego sygnału.16 Jest to warunek kluczowy, który odróżnia zdyscyplinowane ponowne wejście od emocjonalnego "gonienia" ceny.
Ograniczenie Prób: Dozwolona jest maksymalnie jedna próba ponownego wejścia na jeden pierwotny sygnał transakcyjny. Ma to na celu zapobieganie wielokrotnemu otwieraniu pozycji w warunkach nasilającego się "szumu" i generowania serii strat.
Poniższy schemat przedstawia logikę decyzyjną algorytmu ponownego wejścia w formie krok po kroku, co ułatwia jego zrozumienie i implementację.
Schemat 3: Logika Decyzyjna Ponownego Wejścia
START: Pozycja została zamknięta na zleceniu stop-loss.
KROK 1: Sprawdź licznik prób.
Czy liczba prób ponownego wejścia dla tej pierwotnej transakcji jest mniejsza niż 1?
NIE: KONIEC. (Próba została już wykorzystana).
TAK: Przejdź do Kroku 2.
KROK 2: Sprawdź warunek czasowy.
Czy od zamknięcia pozycji minęło mniej niż N (np. 3) świec?
NIE: KONIEC. (Okno czasowe na ponowne wejście minęło).
TAK: Przejdź do Kroku 3.
KROK 3: Sprawdź reżim rynkowy.
Czy aktualny reżim rynkowy (wg ADX) jest taki sam jak w momencie otwierania pierwotnej pozycji?
NIE: KONIEC. (Teza transakcyjna jest nieaktualna).
TAK: Przejdź do Kroku 4.
KROK 4: Oczekuj na nowy sygnał.
Czy pojawił się nowy, ważny sygnał wejścia, zgodny z logiką aktywnego modułu (np. nowe przecięcie na stochastyku)?
NIE: Czekaj na kolejną świecę i powtórz Krok 4.
TAK: Przejdź do Kroku 5.
KROK 5: Wykonaj ponowne wejście.
Otwórz nową pozycję zgodnie z nowym sygnałem.
Zwiększ licznik prób ponownego wejścia dla tej transakcji do 1.
KONIEC.
Ta ustrukturyzowana, wieloetapowa weryfikacja zapewnia, że ponowne wejścia są podejmowane w sposób zdyscyplinowany i oparty na danych, a nie na emocjonalnej chęci "odegrania się" na rynku.

Sekcja 5: Zarządzanie Otwartymi Pozycjami podczas Zmiany Reżimu Rynkowego

Jednym z najbardziej złożonych wyzwań dla systemów adaptacyjnych jest zarządzanie pozycją, która została otwarta w jednym reżimie rynkowym, podczas gdy rynek niespodziewanie przechodzi w inny reżim. Jest to krytyczny moment, w którym prostolinijna logika może prowadzić do suboptymalnych wyników. Zaawansowany system musi posiadać protokół nawigacji w takich okresach przejściowych.

5.1 Wyzwanie Zmiany Reżimu w Trakcie Transakcji

Najprostszym rozwiązaniem byłoby natychmiastowe zamknięcie każdej otwartej pozycji w momencie, gdy ADX przekroczy próg w przeciwnym kierunku (np. zamknięcie pozycji z konsolidacji, gdy ADX wzrośnie powyżej 25). Takie podejście jest jednak często nieefektywne. Może prowadzić do przedwczesnego ucinania zyskownych transakcji – na przykład, pozycja otwarta w ramach strategii mean-reversion może zostać zamknięta dokładnie w momencie, gdy cena wybija się z konsolidacji, rozpoczynając silny i zyskowny trend.
Znacznie bardziej wyrafinowanym i potencjalnie bardziej dochodowym podejściem jest adaptacja strategii zarządzania pozycją do nowego reżimu, zamiast jej bezwarunkowego zamykania.18 Oznacza to, że system nie zamyka pozycji, ale modyfikuje jej logikę wyjścia (stop-loss i take profit), aby dopasować ją do nowo panujących warunków rynkowych.

5.2 Protokół Logiki Przejściowej

Aby zaimplementować taką adaptacyjną logikę, system musi posiadać "pamięć" – każda otwarta pozycja musi być oznaczona ("otagowana") reżimem, w którym została zainicjowana. Dzięki temu, na każdej nowej świecy, bot może porównać aktualny reżim rynkowy z reżimem początkowym transakcji i, w razie rozbieżności, zastosować odpowiedni protokół przejściowy.
Przypadek 1: Przejście z Reżimu Konsolidacji w Reżim Trendowy
Scenariusz: Bot utrzymuje pozycję długą, otwartą na podstawie sygnału z oscylatora stochastycznego w reżimie konsolidacji (ADX < 25). W trakcie trwania transakcji, wskaźnik ADX dynamicznie wzrasta i przekracza próg 25.
Działanie: W momencie przekroczenia progu, system anuluje pierwotnie ustawiony, stały cel zysku (take profit). Jednocześnie, zlecenie stop-loss zostaje przekonwertowane z początkowego, statycznego poziomu na kroczący stop-loss oparty na ATR (Chandelier Exit), czyli mechanizm stosowany przez moduł trendowy.
Uzasadnienie: Pierwotne założenie o powrocie ceny do średniej zostało zanegowane przez rynek, który teraz sygnalizuje początek trendu. Zamiast realizować niewielki zysk, bot adaptuje się do nowej sytuacji i zmienia swój cel: z "zebrania zysku z zakresu" na "podążanie za nowym trendem". Daje to pozycji szansę na wygenerowanie znacznie większego zysku.
Przypadek 2: Przejście z Reżimu Trendowego w Reżim Konsolidacji
Scenariusz: Bot jest w zyskownej pozycji długiej, otwartej na podstawie sygnału z przecięcia linii +DI/-DI w reżimie trendowym (ADX > 25). W trakcie trwania transakcji, trend słabnie, a ADX spada poniżej progu 25.
Działanie: Kroczący stop-loss oparty na ATR jest utrzymywany, ale jego mechanizm podążania za ceną zostaje zablokowany. Staje się on statycznym zleceniem stop-loss na ostatnim, najwyższym poziomie, jaki osiągnął ("high-water mark"). Dodatkowo, system może zidentyfikować najbliższy istotny poziom oporu i ustawić na nim nowy, stały cel zysku.
Uzasadnienie: Spadek ADX poniżej 25 sygnalizuje, że impet trendu wygasł.1 Priorytetem staje się teraz ochrona zysków zgromadzonych podczas fazy trendu. Zablokowanie zlecenia kroczącego zapobiega oddawaniu zysków w chaotycznych ruchach bocznych, które często następują po zakończeniu trendu. Ustawienie nowego celu zysku jest natomiast dostosowaniem się do nowej, horyzontalnej charakterystyki rynku.
Ta zdolność do modyfikacji strategii wyjścia w czasie rzeczywistym, w odpowiedzi na zmieniający się kontekst rynkowy, jest cechą charakterystyczną zaawansowanych, adaptacyjnych systemów algorytmicznych. Wymaga ona implementacji mechanizmu zarządzania stanem, który pozwala systemowi nie tylko reagować na bieżące dane, ale interpretować je w kontekście historycznych decyzji, co prowadzi do znacznie bardziej inteligentnego zarządzania portfelem.

Sekcja 6: Plan Implementacji i Walidacji

Ostatnim, lecz kluczowym etapem jest przekształcenie zaprojektowanej architektury i logiki w działający, przetestowany i niezawodny system transakcyjny. Ta sekcja przedstawia plan wdrożenia, ze szczególnym naciskiem na rygorystyczne metody testowania i unikanie powszechnych pułapek w analizie ilościowej.

6.1 Stos Technologiczny i Implementacja

Język Programowania: Python jest de facto standardem w indywidualnych badaniach ilościowych i prototypowaniu strategii, dzięki bogatemu ekosystemowi bibliotek naukowych i finansowych.
Frameworki do Backtestingu: Zamiast budować silnik do backtestingu od zera, zaleca się wykorzystanie istniejących, sprawdzonych frameworków. Biblioteki takie jak backtesting.py 20 lub
Freqtrade 23 oferują gotowe rozwiązania do obsługi danych, symulacji zleceń, obliczania wskaźników i generowania metryk wydajności.
backtesting.py jest ceniony za prostotę, szybkość i wbudowane narzędzia do optymalizacji, choć jego podstawowa wersja ma ograniczenia w testowaniu strategii na wielu instrumentach jednocześnie.20
Zarządzanie Danymi: Niezbędne jest wykorzystanie wysokiej jakości danych historycznych w formacie OHLCV (Open, High, Low, Close, Volume). Dane te muszą być czyste, a wszelkie braki, błędy czy anomalie (np. wynikające z podziału akcji) muszą być odpowiednio obsłużone przed rozpoczęciem testów, aby zapewnić wiarygodność wyników.24

6.2 Rygorystyczny Protokół Backtestingu

Dobry wynik w backtestingu nie gwarantuje sukcesu w handlu na żywo, ale zły wynik niemal na pewno go wyklucza. Kluczem jest przeprowadzenie testów w sposób, który jak najwierniej symuluje realne warunki handlowe i unika powszechnych błędów metodologicznych.
Unikanie Błędu "Lookahead Bias": Jest to najpoważniejszy i najczęstszy błąd w backtestingu, polegający na nieświadomym wykorzystaniu przyszłych informacji do podejmowania decyzji w przeszłości.26 Pętla backtestingu musi przetwarzać dane w sposób sekwencyjny, świeca po świecy. Należy bezwzględnie upewnić się, że w momencie podejmowania decyzji na świecy
t, algorytm ma dostęp wyłącznie do danych z czasu t i wcześniejszych. Klasycznym przykładem tego błędu jest użycie ceny zamknięcia z danej świecy do podjęcia decyzji w trakcie jej trwania, podczas gdy w rzeczywistości cena ta jest znana dopiero po jej zamknięciu.26
Analiza Walk-Forward: Metoda ta jest znacznie bardziej wiarygodna niż pojedynczy, statyczny backtest na całym zbiorze danych. Polega na podziale danych historycznych na zachodzące na siebie segmenty. System jest optymalizowany na jednym segmencie (np. 2 lata danych "in-sample"), a następnie testowany na kolejnym, "niewidzianym" wcześniej segmencie (np. 6 miesięcy danych "out-of-sample"). Proces ten jest powtarzany krocząco ("walk-forward") przez cały dostępny zbiór danych. Ta technika rygorystycznie testuje zdolność strategii do adaptacji do zmieniających się warunków rynkowych i jest najlepszym sposobem na ograniczenie ryzyka nadmiernego dopasowania (overfitting).27
Realistyczna Symulacja Kosztów: Backtest musi uwzględniać realistyczne koszty transakcyjne, takie jak prowizje maklerskie, opłaty giełdowe oraz poślizgi cenowe (slippage) – różnicę między ceną oczekiwaną a ceną faktycznej realizacji zlecenia. Strategia, która wydaje się zyskowna bez uwzględnienia tych kosztów, bardzo często okazuje się nierentowna w warunkach rzeczywistych.24
Istotność Statystyczna: Aby wyniki backtestingu były wiarygodne, strategia musi wygenerować wystarczająco dużą liczbę transakcji (zazwyczaj minimum 100-200).14 Wyniki oparte na kilku transakcjach są najprawdopodobniej dziełem przypadku i nie mają wartości prognostycznej.

6.3 Metryki Wydajności i Ocena

Ocena strategii nie może opierać się wyłącznie na stopie zwrotu. Niezbędna jest kompleksowa analiza uwzględniająca ryzyko.
Metryki Zwrotu Skorygowanego o Ryzyko: Należy obliczyć kluczowe wskaźniki, takie jak Współczynnik Sharpe'a (mierzący zwrot w stosunku do całkowitej zmienności) oraz Współczynnik Sortino (który uwzględnia tylko zmienność "negatywną", czyli ryzyko straty).
Metryki Ryzyka: Najważniejszymi wskaźnikami są Maksymalne Obsunięcie Kapitału (Maximum Drawdown), które pokazuje największą procentową stratę od szczytu do dołka na krzywej kapitału, oraz Współczynnik Calmara (Roczna Stopa Zwrotu / Maksymalne Obsunięcie Kapitału), który jest doskonałą miarą efektywności strategii w kontekście ponoszonego ryzyka.
Analiza Krzywej Kapitału: Wizualna inspekcja krzywej kapitału jest niezbędna. Pożądana jest krzywa, która rośnie w miarę stabilnie, bez gwałtownych i długotrwałych okresów obsunięć.30
Testowanie systemu opartego na przełączaniu reżimów jest zadaniem znacznie bardziej złożonym niż testowanie pojedynczej strategii. Standardowy backtest wygeneruje jedną, zagregowaną krzywą kapitału, która miesza wyniki obu modułów strategicznych oraz skuteczność samego mechanizmu przełączania. Słaby wynik ogólny może być spowodowany niską skutecznością strategii trendowej, strategii konsolidacyjnej lub, co najistotniejsze, błędnym działaniem filtra reżimów, który aktywuje właściwą strategię w niewłaściwym czasie.31
Aby prawidłowo zdiagnozować i zoptymalizować tak złożony system, platforma do backtestingu musi umożliwiać dez agregację wyników. Należy wygenerować osobne raporty wydajności dla:
Transakcji zawartych w reżimie konsolidacji.
Transakcji zawartych w reżimie trendowym.
Transakcji, które były utrzymywane podczas zmiany reżimu.
Analizy skuteczności samego klasyfikatora reżimów (np. w formie macierzy pomyłek, pokazującej, jak często zdiagnozowany "trend" faktycznie prowadził do zyskownej transakcji trendowej).
Tylko tak granularna analiza pozwala zidentyfikować, który element systemu wymaga poprawy i upewnić się, że sam mechanizm adaptacyjny wnosi wartość dodaną, a nie jest jedynie źródłem dodatkowego szumu i błędnych decyzji.

Wnioski

Przedstawiony projekt stanowi kompleksowy plan architektoniczny dla zaawansowanego, adaptacyjnego bota transakcyjnego. Jego siła leży w zdolności do dynamicznej diagnozy panującego reżimu rynkowego i dopasowywania do niego odpowiedniej strategii operacyjnej. Poprzez zintegrowane wykorzystanie wskaźników ADX do oceny siły trendu i ATR do pomiaru zmienności, system jest w stanie przełączać się między strategią mean-reversion opartą na oscylatorze stochastycznym w warunkach konsolidacji, a strategią podążania za trendem opartą na systemie DMI w okresach silnych ruchów kierunkowych.
Kluczowe elementy, które wyróżniają ten projekt, to:
Wielowymiarowa Klasyfikacja Rynku: System nie opiera się na pojedynczym wskaźniku, lecz tworzy czterostanową macierz reżimów (Trendowy, Konsolidacji, Stagnacyjny, Paniki), co pozwala na bardziej precyzyjne i bezpieczne działanie.
Dynamiczne Zarządzanie Ryzykiem: Implementacja samoregulującego się mechanizmu, w którym wielkość pozycji jest automatycznie dostosowywana do zmienności rynkowej (mierzonej przez ATR), zapewnia stałe ryzyko na transakcję i naturalnie ogranicza ekspozycję w okresach podwyższonego ryzyka.
Inteligentne Protokoły: Opracowanie szczegółowych algorytmów dla kluczowych wyzwań, takich jak zarządzanie pozycją podczas zmiany reżimu oraz zdyscyplinowane ponowne wejście po przedwczesnym zamknięciu na stop-loss, podnosi system na wyższy poziom zaawansowania w porównaniu do standardowych botów.
Rygorystyczna Walidacja: Nacisk na zaawansowane techniki backtestingu, takie jak analiza walk-forward i dezagregacja wyników, jest kluczowy dla zbudowania zaufania do strategii i uniknięcia kosztownych błędów, takich jak nadmierne dopasowanie i błąd "lookahead bias".
Pomyślna implementacja tego systemu wymaga nie tylko umiejętności programistycznych, ale przede wszystkim zdyscyplinowanego podejścia do testowania i optymalizacji. Każdy parametr – od okresów wskaźników, przez progi decyzyjne, aż po mnożniki ATR – powinien być przedmiotem rygorystycznej analizy w celu znalezienia wartości, które są nie tylko zyskowne, ale przede wszystkim solidne i odporne na zmiany w charakterystyce rynku. Finalny produkt będzie systemem transakcyjnym, który nie tylko wykonuje zlecenia, ale w pewnym stopniu "rozumie" kontekst rynkowy i adaptuje swoje zachowanie, co stanowi fundament długoterminowego sukcesu w handlu algorytmicznym.
Cytowane prace
ADX: The Trend Strength Indicator - Investopedia, otwierano: września 14, 2025, https://www.investopedia.com/articles/trading/07/adx-trend-indicator.asp
The Ultimate Trend Indicator: Understanding the Average Directional Index (ADX) | TrendSpider Learning Center, otwierano: września 14, 2025, https://trendspider.com/learning-center/the-ultimate-trend-indicator-understanding-the-average-directional-index-adx/
ADX Indicator Trading Strategies - AvaTrade, otwierano: września 14, 2025, https://www.avatrade.com/education/technical-analysis-indicators-strategies/adx-indicator-trading-strategies
What is Mean Reversion and How Does It Work? | IG AE, otwierano: września 14, 2025, https://www.ig.com/ae/trading-strategies/what-is-mean-reversion-and-how-does-it-work--230925
Mastering ADX Indicator Across Various Chart Types | Definedge Securities, otwierano: września 14, 2025, https://www.definedgesecurities.com/blog/education/mastering-adx-indicator-across-various-chart-types/
ATR Indicator Trading Strategy: Master Volatility for Better Breakouts and Risk Management, otwierano: września 14, 2025, https://www.mindmathmoney.com/articles/atr-indicator-trading-strategy-master-volatility-for-better-breakouts-and-risk-management
Average True Range (ATR) Formula, What It Means, and How to Use It - Investopedia, otwierano: września 14, 2025, https://www.investopedia.com/terms/a/atr.asp
Volatility Deviation Moving Average Crossover Quantitative Strategy | by FMZQuant | Jul, 2025 | Medium, otwierano: września 14, 2025, https://medium.com/@FMZQuant/volatility-deviation-moving-average-crossover-quantitative-strategy-2299d3157384
Directional Movement +DI -DI ADX | Indicators & Company Fundamentals, otwierano: września 14, 2025, https://help.tc2000.com/m/69404/l/744697-directional-movement-di-di-adx
Stochastic Oscillator: What It Is, How It Works, How To Calculate - Investopedia, otwierano: września 14, 2025, https://www.investopedia.com/terms/s/stochasticoscillator.asp
How to Use Stochastic in Trending vs. Ranging Markets - LuxAlgo, otwierano: września 14, 2025, https://www.luxalgo.com/blog/how-to-use-stochastic-in-trending-vs-ranging-markets/
Best Stochastic Settings for Swing Trading - VectorVest, otwierano: września 14, 2025, https://www.vectorvest.com/blog/swing-trading/best-stochastic-settings-for-swing-trading/
Stochastic Oscillator (Fast, Slow, and Full) - ChartSchool - StockCharts.com, otwierano: września 14, 2025, https://chartschool.stockcharts.com/table-of-contents/technical-indicators-and-overlays/technical-indicators/stochastic-oscillator-fast-slow-and-full
How to Use ATR for Volatility-Based Stop-Losses - LuxAlgo, otwierano: września 14, 2025, https://www.luxalgo.com/blog/how-to-use-atr-for-volatility-based-stop-losses/
Measure Volatility With Average True Range - Investopedia, otwierano: września 14, 2025, https://www.investopedia.com/articles/trading/08/average-true-range.asp
Should you reenter after your stop loss got hit? Reenter when you ..., otwierano: września 14, 2025, https://optimusfutures.com/blog/should-you-reenter-after-your-stop-loss-got-hit/
Stopped Out Again? How to Avoid Falling Victim to Stop Raids - TRADEPRO Academy, otwierano: września 14, 2025, https://tradeproacademy.com/how-to-place-effective-stop-losses/
Market Regimes Explained: Build Winning Trading Strategies, otwierano: września 14, 2025, https://www.luxalgo.com/blog/market-regimes-explained-build-winning-trading-strategies/
How does one address the issue of regime shift in algorithmic trading? - Quora, otwierano: września 14, 2025, https://www.quora.com/How-does-one-address-the-issue-of-regime-shift-in-algorithmic-trading
Backtesting.py - An Introductory Guide to Backtesting with Python - AlgoTrading101 Blog, otwierano: września 14, 2025, https://algotrading101.com/learn/backtesting-py-guide/
Backtesting.py - Backtest trading strategies in Python, otwierano: września 14, 2025, https://kernc.github.io/backtesting.py/
Backtesting.py – An Introductory Guide to Backtesting with Python - Interactive Brokers, otwierano: września 14, 2025, https://www.interactivebrokers.com/campus/ibkr-quant-news/backtesting-py-an-introductory-guide-to-backtesting-with-python/
Lookahead analysis - Freqtrade, otwierano: września 14, 2025, https://www.freqtrade.io/en/stable/lookahead-analysis/
Risks and Limitations of Backtesting | TrendSpider Learning Center, otwierano: września 14, 2025, https://trendspider.com/learning-center/risks-and-limitations-of-backtesting/
Building and Backtesting Trading Strategies with Python - PyQuant News, otwierano: września 14, 2025, https://www.pyquantnews.com/free-python-resources/building-and-backtesting-trading-strategies-with-python
Backtesting Trading Strategies – Everything you need to know - Build Alpha, otwierano: września 14, 2025, https://www.buildalpha.com/backtesting-trading-strategies/
How To Avoid Bias in Backtesting | Billions Club - For Traders, otwierano: września 14, 2025, https://www.fortraders.com/blog/how-to-avoid-bias-in-backtesting
How To Backtest A Trading Strategy: A Step-by-Step Guide - NewTrading.io, otwierano: września 14, 2025, https://www.newtrading.io/backtesting-guide/
Backtesting as a Blueprint: How to Build Winning Strategies - FX Replay, otwierano: września 14, 2025, https://www.fxreplay.com/blogs/backtesting-as-a-blueprint-how-to-build-winning-strategies
Building your trading arsenal: A comprehensive Python back-testing framework, otwierano: września 14, 2025, https://python.plainenglish.io/building-your-trading-arsenal-a-comprehensive-python-back-testing-framework-87215ea95051
Regime focus in Backtesting - How important is it? : r/algotrading - Reddit, otwierano: września 14, 2025, https://www.reddit.com/r/algotrading/comments/1i940z3/regime_focus_in_backtesting_how_important_is_it/
